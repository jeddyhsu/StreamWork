@model StreamWork.ViewModels.Tutor.TutorStreamViewModel

@{Layout = "_LayoutTutorNavbar";}
@{ViewData["Title"] = "TutorStream";}

@if (!Model.UserProfile.ProfileType.Equals("tutor") || !Model.UserProfile.AcceptedTutor)
{
    <script>$(document).ready(function () {
            $('#unapprovedTutorModal').modal({
                backdrop: 'static',
                keyboard: false
            })
        })</script>
}
else if (Model.UserChannel.StreamTitle == null && Model.UserChannel.StreamSubject == null)
{
    <script>$(document).ready(function () {
    OpenModal('registerStreamModal');
        })</script>
}

<div class="container-fluid">
    <div class="row" style="background-color:white;position:absolute; height: calc(100% - 50px); width:100%;">
        <div id="stream" class="d-flex flex-column col-lg-8 col-md-12 col-sm-12 col-12 p-0" style="position:relative">
            <iframe style=" width:100%; height:100%;" class="p-0" src="https://c.streamhoster.com/embed/media/WxsdDM/mAe0epZsixC/@Model.UserChannel.ChannelKey.Split('|')[0]" frameborder="0" scrolling="no" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>
        </div>
        <div id="chatBox" class="d-flex flex-column col-lg-4 col-md-12 col-sm-12 col-12 p-0">
            @RenderBody("http://localhost:58539/chat/streamworkchat?chatId=@Model.UserChannel.Username&chatInfo=@Model.ChatInfo")
        </div>
    </div>

   

    @*Notify Modal Fail*@
    <div class="modal fade" id="notifyModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body" style="background-color:red;">
                    <p id="notifyBody" class="text-center p-0 m-0" style="color:white; font-size:16px"></p>
                </div>
            </div>
        </div>
    </div>

    @*Notify Modal Sucess*@
    <div class="modal fade" id="notifyModalSuccess" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body" style="background-color:green;">
                    <p id="notifyBodySuccess" class="text-center p-0 m-0" style="color:white; font-size:16px"></p>
                </div>
            </div>
        </div>
    </div>


    @*Unapproved Tutor Modal*@
    <div id="unapprovedTutorModal" class="modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content" style="background-color: whitesmoke">
                <div class="modal-header">
                    <h5 class="modal-title" style="color:black">Looks like you haven't been verified yet!</h5>
                </div>
                <div class="modal-body">
                    <p style="color: black;">It appears you are not a verified StreamTutor! If you are a student, create a separate student account. If you are a StreamTutor, please wait 1-2 business days to be approved. In the meantime feel free to edit your profile and watch some streams. </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="streamWorkGrey" style="cursor:pointer" onclick="window.location.href = '/Tutor/TutorDashboard'">Exit</button>
                </div>
            </div>
        </div>
    </div>

</div>

<div id="registerStreamModal" class="custom-modal">
    <div class="custom-modal-content">
        <h5 class="form-header" style="padding-left:20px; padding-top:10px; font-size:16px;">Stream Information</h5>
        <div class="slider">
            <div class="slider-object" style="width:160px"></div>
        </div>
        <div class="row">
            <div class="col-12">
                <form id="registerStreamForm" class="pt-4 pb-4 pl-5 pr-5">
                    <div class="form-group">
                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-12 col-12 mt-2">
                                <label class="form-header">Stream Title</label>
                                <input class="form-control form-input mb-2" type="text" id="streamTitle" placeholder="ex: Calculus 2: Integrals" required>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12 col-12 mt-2">
                                <label class="form-header">Stream Subject</label>
                                <select class="form-control form-input" id="streamSubject">
                                    <option value="Select Subject">-Select-Subject-</option>
                                    <option value="Mathematics">Mathematics</option>
                                    <option value="Science">Science</option>
                                    <option value="Engineering">Engineering</option>
                                    <option value="Business">Business</option>
                                    <option value="Law">Law</option>
                                    <option value="Art">Art</option>
                                    <option value="Humanities">Humanities</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="col-12 pt-3">
                                <label class="form-header">Stream Description</label>
                                <textarea class="form-control form-textarea " type="text" id="streamTitle" placeholder="ex: Today we are going to be learning about how to do integrals using U-Substitution" required></textarea>
                            </div>
                            <div class="col-lg-9 col-md-9 col-sm-12 col-12 pt-3">
                                <label class="form-header">Stream Thumbnail</label>
                                <div class="image-container mr-auto ml-auto">
                                    <img class="mt-1" id="previewStreamThumbnail" src="~/images/MathDefault.png" alt="your image" style="width:100%; border-radius:10px">
                                    <input id="addStreamThumbnail" type="image" class="bottom-right" src="~/images/TutorAssets/TutorDashboard/Upload.png" style="bottom:-5px"/>
                                    <input name="uploadThumbnail" id="uploadThumbnail" class="d-none" type="file" value="~/images/MathDefault.png" onchange="readURL(this,'ThumbnailEdit');">
                                    <script>
                                        $("#addStreamThumbnail").click(function (e) {
                                            e.preventDefault()
                                            $("input[id='uploadThumbnail']").click();
                                        })
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <button class="btn border-0 rounded-0 p-3 w-100" style="background-color:#004643; color:white" onclick="SaveUniversityInfo()">Save Changes</button>
    </div>
</div>

<script>$(document).ready(function () {

        $("#nav").click(function () {

            $("#navbarText").slideToggle();

        });
    });</script>

<script>$("#info").tooltip();
    $("#info2").tooltip();</script>
