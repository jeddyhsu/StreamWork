@model StreamWork.ViewModels.StreamPlayBackPageViewModel
@{ViewData["Title"] = "StreamPlaybackPage";}

@if (Model.UserProfile.ProfileType == "tutor")
{
    { Layout = "_LayoutTutorNavbar"; }
}
else
{
    { Layout = "_LayoutStudentNavbar"; }
}

@*
@if (!Model.IsSubscribed())
{
    <script>window.location.href = '/Home/Subscribe';</script>
}
*@

<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-8 p-0">
            <div>
                <iframe src="https://c.streamhoster.com/embed/media/WxsdDM/mAe0epZsixC/@Model.ArchivedStream.StreamID" width="100%" height="700px" frameborder="0" scrolling="no" allow="autoplay" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>
                <h2 class="text-center mt-3" style="font-family:'Roboto Slab', serif;">@Model.ArchivedStream.StreamTitle</h2>
            </div>
        </div>
        <div class="col-sm-12 col-md-12 col-lg-4">
            <div class="card text-center border-0" style="color:white; ">
                <div class="card-body" style="background-color:white; border-top-right-radius:5px; border-top-left-radius:5px; ">
                    <a href="/Home/ProfileView?Tutor=@Model.TutorUserProfile.Username"><img src=@Model.TutorUserProfile.ProfilePicture style="width:115px; height: 150px; border-radius:5%; cursor:pointer" /></a>
                    <br />
                    @if (Model.IsUserFollowingThisTutor == false && Model.UserProfile != null && Model.UserProfile.ProfileType == "student")
                    {
                        <button id="FollowButton" type="button" style="font-size:12px; background-color:#007070; color:white" class="btn mt-3" onclick="FollowStreamTutor('@Model.UserChannel.Id')">Follow</button>
                        <button id="UnfollowButton" type="button" style="font-size:12px; background-color:#007070; display:none; color:white" class="btn mt-3" onclick="UnfollowStreamTutor('@Model.UserChannel.Id')">Unfollow</button>
                    }
                    else if (Model.IsUserFollowingThisTutor == true && Model.UserProfile != null && Model.UserProfile.ProfileType == "student")
                    {
                        <button id="FollowButton" type="button" style="font-size:12px;display:none; background-color:#007070; color:white" class="btn mt-3" onclick="FollowStreamTutor('@Model.UserChannel.Id')">Follow</button>
                        <button id="UnfollowButton" type="button" style="font-size:12px; background-color:#007070; color:white" class="btn mt-3" onclick="UnfollowStreamTutor('@Model.UserChannel.Id')">Unfollow</button>
                    }
                    <h1 class="card-title mt-4" style="font-size: 24px; color: black; font-family: 'Roboto Slab', serif;"><b>@Model.TutorUserProfile.Name.Replace('|', ' ')</b></h1>
                    <p class="card-text" style="font-size:16px; color:black">@Model.TutorUserProfile.ProfileCaption</p>
                    <p class="card-text" style="font-size:14px; color:black">@Model.TutorUserProfile.ProfileParagraph</p>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="card-body" style="background-color:white; border-bottom-left-radius:5px">
                            <h5 style="color:black">Streams</h5>
                            <h4 style="color:black">@Model.NumberOfStreams</h4>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="card-body" style="background-color:white;border-top-left-radius:0px ">
                            <a href="/Home/Donate?tutor=@Model.UserChannel.Username"><button class="uploadbtn" style="font-family:'Roboto Slab', serif; cursor: pointer; display:block; margin-left:auto; margin-right:auto; height:68px; width:100%; background-color:#FFC04C; color:black; border:none;" onmouseover="">Donate</button></a>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="card-body" style="background-color:white; border-bottom-right-radius:5px ">
                            <h5 style="color:black">Total Views</h5>
                            <h4 style="color:black">@Model.ArchivedStream.Views</h4>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div class="container-fluid">
            <hr />
            <h5 class="text-center"><b>Other Streams</b></h5>
            <div class="row">
                @foreach (var videoInfo in Model.ArchivedStreams)
                {
                    <div class="col-lg-4 col-md-6 col-sm-6 streamsubject @videoInfo.StreamSubject">
                        <div class="card mt-3" style="border:none; background-color:transparent">
                            <a href="../StreamViews/StreamPlaybackPage?streamId=@videoInfo.StreamID"><img style="width:100%; height:100%; border-top-left-radius:10px; border-top-right-radius:10px; border-bottom-left-radius:0px; border-bottom-right-radius:0px;" src="@videoInfo.StreamThumbnail" /></a>
                            <a class="card-body p-0" style="background-color:black; border-bottom-left-radius:10px; border-bottom-right-radius:10px;" href="/Home/ProfileView?Tutor=@videoInfo.Username">
                                <div class="row">
                                    <div class="col-12">
                                        <input type="image" style="border-radius:5%; width:50px; margin-left:10px; margin-top:10px; margin-bottom:10px; height:60px; float:left" src=@videoInfo.ProfilePicture />
                                        <h5 class="text-truncate" style="font-family: 'Roboto'; font-size:15px; color:white; margin-left:80px; margin-top:10px;">@videoInfo.StreamTitle</h5>
                                        <h6 class="text-truncate" style="font-family: 'Roboto'; font-size:14px; color:white; margin-left:80px;">@videoInfo.Username</h6>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<script>$(document).ready(function () {
        $("#nav").click(function () {
            $("#navbarText").slideToggle();
        });
    });</script>